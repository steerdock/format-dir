name: Sync to Multiple Git Mirrors

# 触发条件：当推送到 master 分支，或创建/删除分支/标签时
on: 
  push:
    branches:
      - master
  delete:
  create:

jobs:
  # Job 1: 同步到 Gitee
  sync_to_gitee:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Mirror to Gitee
        uses: pixta-dev/repository-mirroring-action@v1
        with:
          target_repo_url: "https://gitee.com/opcnlin/formatdir.git"
          ssh_private_key: "${{ secrets.GITEE_SSH_PRIVATE_KEY }}"

  # Job 2: 同步到 GitLab
  sync_to_gitlab:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - name: Mirror to GitLab
        uses: pixta-dev/repository-mirroring-action@v1
        with:
          target_repo_url: "https://gitlab.com/silvancoder/formatdir.git"
          ssh_private_key: "${{ secrets.GITLAB_SSH_PRIVATE_KEY }}"